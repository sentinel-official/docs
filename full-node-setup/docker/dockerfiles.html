<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-full-node-setup docs-version-current docs-doc-page docs-doc-id-docker/dockerfiles" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Dockerfiles | Sentinel Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.sentinel.co/img/sentinel-docs-card.png"><meta data-rh="true" name="twitter:image" content="https://docs.sentinel.co/img/sentinel-docs-card.png"><meta data-rh="true" property="og:url" content="https://docs.sentinel.co/full-node-setup/docker/dockerfiles"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-full-node-setup-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-full-node-setup-current"><meta data-rh="true" property="og:title" content="Dockerfiles | Sentinel Docs"><meta data-rh="true" name="description" content="Here are the Docker files for Sentinel Mainnet available with and without Cosmovisor."><meta data-rh="true" property="og:description" content="Here are the Docker files for Sentinel Mainnet available with and without Cosmovisor."><link data-rh="true" rel="icon" href="/logo/sentinel.svg"><link data-rh="true" rel="canonical" href="https://docs.sentinel.co/full-node-setup/docker/dockerfiles"><link data-rh="true" rel="alternate" href="https://docs.sentinel.co/full-node-setup/docker/dockerfiles" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.sentinel.co/full-node-setup/docker/dockerfiles" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://8LDAK2HFBK-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Sentinel Docs" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.7706a617.css">
<script src="/assets/js/runtime~main.1514cac5.js" defer="defer"></script>
<script src="/assets/js/main.db40a570.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","dark"),document.documentElement.setAttribute("data-theme-choice","dark"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/logo/sentinel-logo-light.svg" alt="Sentinel Docs" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/logo/sentinel-logo-dark.svg" alt="Sentinel Docs" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/get-started">Get Started</a><a class="navbar__item navbar__link" href="/p2p-coin">$P2P Coin</a><a class="navbar__item navbar__link" href="/get-started/apps">Apps</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Sentinel Core</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/sentinel-hub">Sentinel HUB</a></li><li><a class="dropdown__link" href="/sentinel-cli">Sentinel CLI</a></li><li><a class="dropdown__link" href="/sdk">SDKs</a></li><li><a class="dropdown__link" href="/networks">Networks</a></li></ul></div><a class="navbar__item navbar__link" href="/dvpn-nodes">dVPN Nodes</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">User Guides</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/dvpn-node-setup">Run a dVPN Node</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/full-node-setup">Run a Full Node &amp; Validate</a></li><li><a class="dropdown__link" href="/node-monitoring">Node Monitoring</a></li></ul></div><a class="navbar__item navbar__link" href="/apis">API</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Find us</a><ul class="dropdown__menu"><li><a href="https://x.com/sentinelp2p" target="_blank" rel="noopener noreferrer" class="dropdown__link">X/Twitter<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://t.me/sentinelp2p" target="_blank" rel="noopener noreferrer" class="dropdown__link">Telegram<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://discord.com/invite/mmAA8qF" target="_blank" rel="noopener noreferrer" class="dropdown__link">Discord<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://www.reddit.com/r/SentinelP2P/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Reddit<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://commonwealth.im/sentinel/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Commonwealth<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://medium.com/@sentinel" target="_blank" rel="noopener noreferrer" class="dropdown__link">Medium<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://youtube.com/@sentinelP2P" target="_blank" rel="noopener noreferrer" class="dropdown__link">YouTube<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Sentinel</a><ul class="dropdown__menu"><li><a href="https://sentinel.co" target="_blank" rel="noopener noreferrer" class="dropdown__link">Website<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://explorer.sentinel.co" target="_blank" rel="noopener noreferrer" class="dropdown__link">Explorer<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://stats.sentinel.co" target="_blank" rel="noopener noreferrer" class="dropdown__link">Stats<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://github.com/sentinel-official" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://gitopia.com/sentineldvpn" target="_blank" rel="noopener noreferrer" class="dropdown__link">Gitopia<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://sentinelgrowthdao.com" target="_blank" rel="noopener noreferrer" class="dropdown__link">Growth DAO<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><a href="https://github.com/sentinel-official/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link pseudo-icon github-icon"></a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts="Meta+k"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="8" stroke="currentColor" fill="none" stroke-width="1.4"></circle><path d="m21 21-4.3-4.3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_mhZE"><div class="multiSectionContainer_bYm7"><div class="section_olD1 sectionActive_D9yk" tabindex="0"><div>User Guides</div><div class="row_KvCx"><button type="button" role="combobox" aria-controls="radix-:R4imlbah:" aria-expanded="false" aria-autocomplete="none" dir="ltr" data-state="closed" aria-label="Select Section" class="sections-menu-trigger sectionsMenu_eet_"><span style="pointer-events:none"></span><span aria-hidden="true"><svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg" class="sections-menu-scrollButton"><path d="M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></span></button><select aria-hidden="true" tabindex="-1" style="position:absolute;border:0;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;word-wrap:normal"></select></div></div></div><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/full-node-setup"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/full-node-setup/server-setup/requirements"><span title="Server Setup" class="categoryLinkLabel_W154">Server Setup</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/full-node-setup/golang"><span title="Golang Setup" class="linkLabel_WmDU">Golang Setup</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/full-node-setup/node-setup"><span title="Full Node Setup" class="linkLabel_WmDU">Full Node Setup</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/full-node-setup/node-run"><span title="Run the Full Node" class="linkLabel_WmDU">Run the Full Node</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/full-node-setup/public-rpc-api"><span title="Set Public RPC/API" class="categoryLinkLabel_W154">Set Public RPC/API</span></a><button aria-label="Expand sidebar category &#x27;Set Public RPC/API&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/full-node-setup/validate"><span title="Validate" class="categoryLinkLabel_W154">Validate</span></a><button aria-label="Expand sidebar category &#x27;Validate&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/full-node-setup/upgrade"><span title="Chain Upgrade" class="linkLabel_WmDU">Chain Upgrade</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item releaseSidebarHeading"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/full-node-setup/docker/overview"><span title="Run by using Docker" class="categoryLinkLabel_W154">Run by using Docker</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/full-node-setup/docker/overview"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/full-node-setup/docker/dockerfiles"><span title="Dockerfiles" class="linkLabel_WmDU">Dockerfiles</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/full-node-setup/docker/build"><span title="Build" class="linkLabel_WmDU">Build</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/full-node-setup/docker/mount-volume"><span title="Mount a Volume" class="linkLabel_WmDU">Mount a Volume</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed releaseSidebarHeading"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/full-node-setup/ibc-relayers/relayers-list"><span title="IBC Relayers" class="categoryLinkLabel_W154">IBC Relayers</span></a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="theme-doc-markdown markdown"><header><h1>Dockerfiles</h1></header>
<p>Here are the Docker files for Sentinel Mainnet available with and without Cosmovisor.</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Dockerfile</summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">#Import the latest ubuntu image which is 24.04 (Noble)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">FROM ubuntu:latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Credit to TrinityStake for the great documentation to help make this possible</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Dockerfile Contents authored by Misfits (The Expanse)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Set the working directory to root</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WORKDIR /</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Install all of the basics we need to perform the install includes wget, nano, curl, git, jq, make, unzip and gcc</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN apt-get update -y &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">apt-get install software-properties-common -y &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">apt-get install nano -y &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">apt-get install wget -y &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">apt-get install curl git jq make unzip gcc -y</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Perform some user housekeeping. Please change these if you use this image in production</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN echo &#x27;root:sentinelhub&#x27; | chpasswd &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">useradd -ms /bin/bash sentinel &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">echo &#x27;sentinel:sentinel&#x27; | chpasswd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Switch directory to sentinel home </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WORKDIR /home/sentinel</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Install Golang and put variables in .bashrc</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN yes &#x27;&#x27; | add-apt-repository ppa:longsleep/golang-backports &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">apt-get install golang-go -y  &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">echo &#x27;export GOROOT=/usr/lib/go&#x27; &gt;&gt; .bashrc &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">echo &#x27;export GOPATH=${HOME}/go&#x27; &gt;&gt; .bashrc &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">echo &#x27;export GOBIN=${GOPATH}/bin&#x27; &gt;&gt; .bashrc &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">echo &#x27;export PATH=${PATH}:${GOROOT}/bin:${GOBIN}&#x27; &gt;&gt; .bashrc</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Install Sentinel Hub</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Must be sentinel or make install executes incorrectly</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">USER sentinel </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN git clone https://github.com/sentinel-official/sentinelhub.git &quot;/home/sentinel/sentinelhub&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WORKDIR /home/sentinel/sentinelhub</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN git checkout v0.11.5 &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">make install </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#root must perform the symlink to enable sentinelhub commands</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">USER root </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN ln -s &quot;/home/sentinel/go/bin/sentinelhub&quot; /usr/bin/sentinelhub</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">USER sentinel </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Initialize the chain and replace the genesis file</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN sentinelhub init --chain-id sentinelhub-2 &quot;Mainnet | Docker&quot; &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">curl -fsLS -o &quot;/home/sentinel/genesis.zip&quot; &quot;https://raw.githubusercontent.com/sentinel-official/networks/main/sentinelhub-2/genesis.zip&quot; &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">echo &#x27;All&#x27; | unzip -d &quot;/home/sentinel/.sentinelhub/config/&quot; &quot;/home/sentinel/genesis.zip&quot; &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rm &quot;${HOME}/genesis.zip&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Configure Sentinel Hub</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WORKDIR /home/sentinel/.sentinelhub/config</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Replace seeds, peers with sentinelhub ones, enable state-sync, multiple chunk fetches, and add gas prices</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN sed -i &#x27;s/seeds = &quot;&quot;/seeds = &quot;05fe2a7847fd27345250915fd06752c424f40651@85.222.234.135:26656,387027e3b1180d3a619cbbf3462704a490785963@54.176.90.228:26656,63bd9cfce0f0d274aad5b166dd06d829021aec43@121.78.247.243:56656,855807cc6a919c22ec943050ebb5c80b23724ed0@3.239.11.246:26656,8caefbf8f4318ecc93f2c901cf11470e4a16c818@161.97.135.122:26656,9174af5f16f74660cccf49f893d243949af45f7f@54.177.29.46:26656,9fa528bd2b9e7c80724a1d8a4e1a2a8a83e7d123@142.93.72.221:26656,a77f6a094578dad899e2f40e0626b4c6d4705311@3.36.165.232:26656,bd45a11390d16d128a9eeea3935b53d7a1a3c120@15.236.127.69:26656,cdb8dd7628460a546ce1594ca0bc0c20366514cf@34.72.64.178:26656,d1efceccb04ded9a604e5235f76da86872157d68@161.97.149.223:26656,e00b23444cc8dbb353d5faa765ab36cfc0116b57@83.60.98.134:28685,e5ee89bd4fc371c6a0e66d2b8daefd891b6b87b5@157.90.117.58:26656,f7ceb735606f90df7eb6cd987641876955b6e325@46.4.55.150:36656,05fe2a7847fd27345250915fd06752c424f40651@85.222.234.135:26656,387027e3b1180d3a619cbbf3462704a490785963@54.176.90.228:26656,63bd9cfce0f0d274aad5b166dd06d829021aec43@121.78.247.243:56656,855807cc6a919c22ec943050ebb5c80b23724ed0@3.239.11.246:26656,8caefbf8f4318ecc93f2c901cf11470e4a16c818@161.97.135.122:26656,9174af5f16f74660cccf49f893d243949af45f7f@54.177.29.46:26656,9fa528bd2b9e7c80724a1d8a4e1a2a8a83e7d123@142.93.72.221:26656,a77f6a094578dad899e2f40e0626b4c6d4705311@3.36.165.232:26656,bd45a11390d16d128a9eeea3935b53d7a1a3c120@15.236.127.69:26656,cdb8dd7628460a546ce1594ca0bc0c20366514cf@34.72.64.178:26656,d1efceccb04ded9a604e5235f76da86872157d68@161.97.149.223:26656,e00b23444cc8dbb353d5faa765ab36cfc0116b57@83.60.98.134:28685,e5ee89bd4fc371c6a0e66d2b8daefd891b6b87b5@157.90.117.58:26656,f7ceb735606f90df7eb6cd987641876955b6e325@46.4.55.150:36656,ebc272824924ea1a27ea3183dd0b9ba713494f83@sentinel.mainnet.peer.autostake.net:26706,ade4d8bc8cbe014af6ebdf3cb7b1e9ad36f412c0@seeds.polkachu.com:23956&quot;/g&#x27; config.toml &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sed -i &#x27;s/persistent_peers = &quot;&quot;/persistent_peers = &quot;f6ba2e3e719428d17b045b43585dd9dcca66e76b@135.181.129.122:14656,e7b825983d15eef809e929b44b2085dcec9d27b6@51.68.44.219:26556,c124ce0b508e8b9ed1c5b6957f362225659b5343@134.65.192.134:26656,9055a3f947fd5eb8027f2a6958026b68eea2da81@157.90.2.111:26656,dd51ff321f29b59b51eedb8682acb3a9f07d44a6@138.201.131.133:26656,1154ef380c350885aef8a2fae6dc308f6844594a@65.108.6.54:50656,00673903c9a12081c7713b6757f62a8c7d7ffcbf@51.159.110.196:26656,1cdf6c69df0a0da5de77bce15270baa0d709d936@51.159.15.87:26656,2a426a8a0070a6830bad32b96cd3da1b7b6a2faa@65.108.11.250:29656,d2d9596df39d9b57ab1f01b8dea1b346178bf6e4@63.33.136.84:26656,2d786027097ca30c5843cf9f11c14a270499d305@3.85.203.113:26656,9c42bcb0d931b6387b4f808f540139bcd5bda968@131.153.174.14:53656,b60ca3f9ec0d72773ed3ea10bdc7acb90e05dea2@51.161.87.126:26656,4506adc06a18029f5620570cfe8cf0144a550125@135.181.216.151:50656,4398bd773ac885b7365de3604eb487be10c54563@95.214.55.227:26706,f0e52da07b2de80d751108ae63c6b2f25b4685a7@23.88.77.182:23956,7a13027588da83f557a176608c785f79ede84564@66.172.36.135:26656,471518432477e31ea348af246c0b54095d41352c@169.155.47.161:26656,a8bf4b3586ad57190d2f60b0e12fc80c138776e7@65.108.234.18:26656,18248ce04952a7e8fab4092eeabff97f6faaeca5@172.105.118.223:26656,fde9b8ae8348c911a1cb149372fa527ed095cbdc@154.12.246.226:26656,c5315e5e43e8e718c7c926c75b651e398750a4f8@137.220.50.79:26656,adad660c3110c10ca0e2f5e434c2f54b9dcb4e60@212.95.53.148:26656,662ccbd8c9885ddff6800a707da3dc6b0c4ed49d@15.235.115.148:10001,694324d39f53d6e6a0f79d33f535d0ee4a96f74a@37.120.245.177:26656,fd1c929dc0c2ce6418b6ed31747469de6c7b15bb@159.223.62.122:26656,25ee0fc9ba93cfcbee369f8c1f8d5d3bf06d1b76@34.23.21.55:26656,99f7fe677d2b5262fe95fb21e3edc5b9fc16fc4f@218.102.97.67:26706,c462db7a9b0d0ac8d26bddf55ed3ebff13219e51@51.159.221.58:26656,b46d8fea2e951ba21594c047c8746ab6dc315cea@65.109.99.157:16604,1c3409fde1bfe7719df8c60c56284ee36b4940e5@88.205.101.222:26656,97e4468ac589eac505a800411c635b14511a61bb@164.152.162.52:26656,6b9054afcd76719a4262694478ede8233e6bd7fb@168.119.64.123:26656,fb71d5064bcb1819f1aa49bf78576b4818fe914f@135.181.28.89:14656,38df1e987161e459b8637ab09cb6cef71ebd5035@109.199.115.65:26656,356e02cf1bb1df0e34e5c9f0470c0ad677bee6d6@185.150.26.184:26656,1bd8ddc05c1c267789854a91ab1d5fd0f5aded15@146.19.24.61:26656,4e43a3028f9c5e2e072b9445176a116245a2558e@135.181.5.232:23956,ef48f35580cf0034e12ca05eafd202a0cc0b577b@75.119.148.134:26656,752240820f1518d37a3c786b8617b9e30727d320@65.21.96.69:27156,dfd4db1ad111c62c83fa300af0092b253773aecc@65.108.106.135:26686,182c428b5ff02dc44bdc20a782b28f0cea204bd4@170.39.193.124:26656,73ef1c0f9bc77fd925decf7fa41f22a35b5dc76d@185.38.19.3:26630,8ebf4283512f708c2aee9d52e37aa694a5ec597a@49.12.165.122:26103,0d9f4ae53eb69d4790e9633094b19e0ff18c6e82@5.10.24.84:26656,212151a8cc307cdc5ad18a174a5cb181fbc7a153@134.65.194.144:27057,5ace0e57784e34930360bf6cc00dd5265278f708@65.108.238.166:23956,45ed1c0498e1ba7894e1362d533583b8c0fa1ae7@136.243.67.189:23956,ada37df88e50dd6b04571f8aa010a700d953e89a@138.201.60.188:26656,09423cc26d5490db197f944908eb2a13ec1c1288@65.108.103.184:25656,6a535c17deedfa178c8bb9c863b0f646e42f978e@163.172.74.144:26656,e1be5e84e6f76bdc4d24d2f39830b6f50857e684@78.107.253.133:33656,89757803f40da51678451735445ad40d5b15e059@169.155.169.176:26656,ecfdb8448a098ba96dc4b379d4e121df96fd706c@172.172.233.101:26656,ee49aa4d21783178781ab7b08922e3a4e288d977@178.63.93.41:50656,39ebd409f6d7bf68276955ded8f44bb3703a3273@65.108.199.42:26656,26422b225939a310fe1022730b38149a69d7d97e@38.242.200.201:26656,578993078e27b2b5f0c205becd3ad263fb9c366b@192.99.4.66:26796,d6d3b940785d0135e53e38bc4639e1cbce47e983@88.99.199.5:26656,2ab3546280efea3be610c1ba89d3d0bdb3f3cf22@51.158.204.245:26656,9045af707b492d02d05a7865a126d80d15627d91@65.109.97.51:26656,e46ba943d251e353bfc1571a168affff30e420fa@65.108.235.36:21656,22efb76a378788caf3bfe3b1ee5e488585e00e6b@51.178.65.225:51656,062847a82a69469c582429235c1b86365b92294d@65.21.201.244:26706,c0ba6216feb4527d6259392f61506fd1ddacc9c9@37.77.107.133:26609,9cb35c25ad0054c8630ea7595a7c60bbc8050c69@54.195.97.95:26656,dc8f68628bf86052fc12223abb9c258b95d677de@95.217.198.248:26656,42aa73ec8d4ec2ffb1c460dde7419991062bd084@138.197.190.122:31981,4e1c2471efb89239fb04a4b75f9f87177fd91d00@169.155.171.37:26656,c07e0facb3ed082e75a4f1e49ea31570c00923c2@188.34.151.177:26656,b212d5740b2e11e54f56b072dc13b6134650cfb5@169.155.45.136:26656,c1db58c070a76784ec203bcb9d51bb6c60737fb7@142.132.131.184:26686,493c4bee520125dea7b93bbe054b0e3918130f3f@46.38.251.243:26656,5781d45c4cce9cc748cf19afdab11e3ec2b21147@116.202.243.94:26656,d1f02ec2c3447e7a218ece5a2aab8f114dece309@167.114.118.234:26796,87b8675bc38f3d309e8fbedb860dd68ded7597f4@202.61.251.234:26656,29136bb5225bf2d20a5d42cd5d2ebb51b8135e18@102.223.5.249:26656,1f95bc704608d6f3d42bfce58e0fefbaef818891@89.149.218.78:26656,e1b058e5cfa2b836ddaa496b10911da62dcf182e@169.155.168.109:26656,ebc272824924ea1a27ea3183dd0b9ba713494f83@195.3.223.168:26706,4c011a64e66a38df4139ad2af5e8fe0798d00624@65.109.97.249:23956,66d0d22dc5e1e542c200da1fc097dae5ea1f3b4e@195.201.175.156:17256,79fe75a45a0e917bb81735fa76d59386c8d4934c@159.89.12.179:26656,79d1dd52fd031dfe4bcb849a39c02b145f12bd8f@38.46.221.75:26656,a527530ec76a3aaac8e18af8b6e33ae1f8170210@154.26.136.5:26656,a2e82bcafc58910b8e0f6cf06ab4e4f1993784c0@202.81.235.65:26656,fb530884639768a9bd3ae5d32cd182ada1b19066@135.181.62.165:26656,d05d4f304a5e736b09b955da53f1d4076a1bcb2a@142.54.174.234:26656,824a44e2332d402969582fbbb3e40b2e8c4855de@207.148.0.61:26656,1ac6746cb5163fc90b6707df802fc1bb63e56035@45.10.26.114:26656,ae9242d78fc004e1c437c5749eb3c0cbab7e879d@159.65.228.219:26656&quot;/g&#x27; config.toml &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sed -i &#x27;s/enable = false/enable = true/g&#x27; config.toml &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sed -i &#x27;s/pruning = &quot;default&quot;/pruning = &quot;custom&quot;/g&#x27; config.toml &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sed -i &#x27;s/pruning-keep-recent = &quot;0&quot;/pruning-keep-recent = &quot;2&quot;/g&#x27; config.toml &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sed -i &#x27;s/pruning-interval = &quot;0&quot;/pruning-interval = &quot;1000&quot;/g&#x27; config.toml &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sed -i &#x27;s/chunk_fetchers = &quot;4&quot;/chunk_fetchers = &quot;42&quot;/g&#x27; config.toml &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sed -i &#x27;s/indexer = &quot;kv&quot;/indexer = &quot;null&quot;/g&#x27; config.toml &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sed -i &#x27;s/prometheus = false/prometheus = true/g&#x27; config.toml &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sed -i &#x27;s/minimum-gas-prices = &quot;0.1udvpn&quot;/minimum-gas-prices = &quot;0.01ibc\/31FEE1A2A9F9C01113F90BD0BBCCE8FD6BBB8585FAF109A2101827DD1D5B95B8,0.1udvpn,0.01ibc\/B1C0DDB14F25279A2026BC8794E12B259F8BDA546A3C5132CCAEE4431CE36783,0.01ibc\/ED07A3391A112B175915CD8FAF43A2DA8E4790EDE12566649D0C2F97716B8518,0.01ibc\/A8C2D23A1E6F95DA4E48BA349667E322BD7A6C996D8A4AAE8BA72E190F3D1477&quot;/g&#x27; app.toml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Replicate the state-sync-sentinel script for mainnet</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">COPY state-sync-sentinel.sh /home/sentinel/sentinelhub</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WORKDIR /home/sentinel/sentinelhub</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Modify permissions to enable script run</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">USER root</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN chown sentinel state-sync-sentinel.sh &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">chmod 700 state-sync-sentinel.sh </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">USER sentinel</span><br></span></code></pre></div></div><p></p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>State Sync Mainnet</summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Script framework credit to Busurnode other contents authored by Misfits (The Expanse)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Service Name </span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">SERVICE_NAME</span><span class="token operator">=</span><span class="token plain">sentinelhub</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># RPC Endpoints for the network</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">SNAP_RPC1</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;https://rpc-sentinel.busurnode.com:443&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">SNAP_RPC2</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;https://na-rpc-sentinel.busurnode.com:443&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Fetch block data from RPC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Fetching trusted block data from RPC...&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">LATEST_HEIGHT</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable function" style="color:rgb(80, 250, 123);font-style:italic">curl</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-s</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> $SNAP_RPC1/block </span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">|</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> jq </span><span class="token variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-r</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> .result.block.header.height</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">BLOCK_HEIGHT</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$((</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">LATEST_HEIGHT </span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">-</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable number" style="color:rgb(189, 147, 249);font-style:italic">2000</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">))</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">TRUST_HASH</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable function" style="color:rgb(80, 250, 123);font-style:italic">curl</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-s</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">&quot;</span><span class="token variable string variable" style="color:rgb(189, 147, 249);font-style:italic">$SNAP_RPC1</span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">/block?height=</span><span class="token variable string variable" style="color:rgb(189, 147, 249);font-style:italic">$BLOCK_HEIGHT</span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">&quot;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">|</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> jq </span><span class="token variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-r</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> .result.block_id.hash</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Update config with latest block from RPC...&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sed</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-i.bak</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-E</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;s|^(enable[[:space:]]+=[[:space:]]+).*$|</span><span class="token string entity" style="color:rgb(255, 121, 198)">\1</span><span class="token string" style="color:rgb(255, 121, 198)">true| ; \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">s|^(rpc_servers[[:space:]]+=[[:space:]]+).*$|</span><span class="token string entity" style="color:rgb(255, 121, 198)">\1</span><span class="token string entity" style="color:rgb(255, 121, 198)">\&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$SNAP_RPC1</span><span class="token string" style="color:rgb(255, 121, 198)">,</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$SNAP_RPC2</span><span class="token string entity" style="color:rgb(255, 121, 198)">\&quot;</span><span class="token string" style="color:rgb(255, 121, 198)">| ; \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">s|^(trust_height[[:space:]]+=[[:space:]]+).*$|</span><span class="token string entity" style="color:rgb(255, 121, 198)">\1</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$BLOCK_HEIGHT</span><span class="token string" style="color:rgb(255, 121, 198)">| ; \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">s|^(trust_hash[[:space:]]+=[[:space:]]+).*$|</span><span class="token string entity" style="color:rgb(255, 121, 198)">\1</span><span class="token string entity" style="color:rgb(255, 121, 198)">\&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$TRUST_HASH</span><span class="token string entity" style="color:rgb(255, 121, 198)">\&quot;</span><span class="token string" style="color:rgb(255, 121, 198)">|&quot;</span><span class="token plain"> </span><span class="token environment constant" style="color:rgb(189, 147, 249)">$HOME</span><span class="token plain">/.sentinelhub/config/config.toml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Stop the sentinel service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Stopping the sentinel service...&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Find the PID of the process</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">pid</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">pgrep </span><span class="token variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-f</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">&quot;</span><span class="token variable string variable" style="color:rgb(189, 147, 249);font-style:italic">$SERVICE_NAME</span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">&quot;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Check if the process is running</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-n</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$pid</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># Kill the process</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">kill</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$pid</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Process </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$SERVICE_NAME</span><span class="token string" style="color:rgb(255, 121, 198)"> killed successfully.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Process </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$SERVICE_NAME</span><span class="token string" style="color:rgb(255, 121, 198)"> not running.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Copy the validator state JSON file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Backing up validator state...&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> </span><span class="token environment constant" style="color:rgb(189, 147, 249)">$HOME</span><span class="token plain">/sentinelhub</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">cp</span><span class="token plain"> ~/.sentinelhub/data/priv_validator_state.json ~/.sentinelhub/priv_validator_state.json</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Reset Tendermint state</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sentinelhub tendermint unsafe-reset-all </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--home</span><span class="token plain"> </span><span class="token environment constant" style="color:rgb(189, 147, 249)">$HOME</span><span class="token plain">/.sentinelhub --keep-addr-book</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Replace priv_validator_state from backup</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Recover validator state from backup...&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">cp</span><span class="token plain"> ~/.sentinelhub/priv_validator_state.json ~/.sentinelhub/data/priv_validator_state.json</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Start the sentinel service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Starting the sentinel service...&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">nohup</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$SERVICE_NAME</span><span class="token plain"> start </span><span class="token operator">&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Process complete.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;****To see the status of the process type cat nohup****&quot;</span><br></span></code></pre></div></div><p></p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Dockerfile with Cosmovisor</summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">#Import the latest ubuntu image which is 24.04 (Noble)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">FROM ubuntu:latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Credit to TrinityStake for the great documentation to help make this possible</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Dockerfile Contents authored by Misfits (The Expanse)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Set the working directory to root</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WORKDIR /</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Install all of the basics we need to perform the install includes wget, nano, curl, git, jq, make, unzip and gcc</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN apt-get update -y &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">apt-get install software-properties-common -y &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">apt-get install nano -y &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">apt-get install wget -y &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">apt-get install curl git jq make unzip gcc -y</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Perform some user housekeeping. Please change these if you use this image in production</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN echo &#x27;root:sentinelhub&#x27; | chpasswd &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">useradd -ms /bin/bash sentinel &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">echo &#x27;sentinel:sentinel&#x27; | chpasswd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Switch directory to sentinel home </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WORKDIR /home/sentinel</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Install Golang and put variables in .bashrc</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN yes &#x27;&#x27; | add-apt-repository ppa:longsleep/golang-backports &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">apt-get install golang-go -y  &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">echo &#x27;export GOROOT=/usr/lib/go&#x27; &gt;&gt; .bashrc &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">echo &#x27;export GOPATH=${HOME}/go&#x27; &gt;&gt; .bashrc &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">echo &#x27;export GOBIN=${GOPATH}/bin&#x27; &gt;&gt; .bashrc &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">echo &#x27;export PATH=${PATH}:${GOROOT}/bin:${GOBIN}&#x27; &gt;&gt; .bashrc</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Install Sentinel Hub</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Must be sentinel or make install executes incorrectly</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">USER sentinel </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN git clone https://github.com/sentinel-official/sentinelhub.git &quot;/home/sentinel/sentinelhub&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WORKDIR /home/sentinel/sentinelhub</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN git checkout v0.11.5 &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">make install </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#root must perform the symlink to enable sentinelhub commands</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">USER root </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN ln -s &quot;/home/sentinel/go/bin/sentinelhub&quot; /usr/bin/sentinelhub</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">USER sentinel </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Initialize the chain and replace the genesis file</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN sentinelhub init --chain-id sentinelhub-2 &quot;Mainnet | Docker&quot; &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">curl -fsLS -o &quot;/home/sentinel/genesis.zip&quot; &quot;https://raw.githubusercontent.com/sentinel-official/networks/main/sentinelhub-2/genesis.zip&quot; &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">echo &#x27;All&#x27; | unzip -d &quot;/home/sentinel/.sentinelhub/config/&quot; &quot;/home/sentinel/genesis.zip&quot; &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rm &quot;${HOME}/genesis.zip&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Configure Sentinel Hub</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WORKDIR /home/sentinel/.sentinelhub/config</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Replace seeds, peers with sentinelhub ones, enable state-sync, multiple chunk fetches, and add gas prices</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN sed -i &#x27;s/seeds = &quot;&quot;/seeds = &quot;05fe2a7847fd27345250915fd06752c424f40651@85.222.234.135:26656,387027e3b1180d3a619cbbf3462704a490785963@54.176.90.228:26656,63bd9cfce0f0d274aad5b166dd06d829021aec43@121.78.247.243:56656,855807cc6a919c22ec943050ebb5c80b23724ed0@3.239.11.246:26656,8caefbf8f4318ecc93f2c901cf11470e4a16c818@161.97.135.122:26656,9174af5f16f74660cccf49f893d243949af45f7f@54.177.29.46:26656,9fa528bd2b9e7c80724a1d8a4e1a2a8a83e7d123@142.93.72.221:26656,a77f6a094578dad899e2f40e0626b4c6d4705311@3.36.165.232:26656,bd45a11390d16d128a9eeea3935b53d7a1a3c120@15.236.127.69:26656,cdb8dd7628460a546ce1594ca0bc0c20366514cf@34.72.64.178:26656,d1efceccb04ded9a604e5235f76da86872157d68@161.97.149.223:26656,e00b23444cc8dbb353d5faa765ab36cfc0116b57@83.60.98.134:28685,e5ee89bd4fc371c6a0e66d2b8daefd891b6b87b5@157.90.117.58:26656,f7ceb735606f90df7eb6cd987641876955b6e325@46.4.55.150:36656,05fe2a7847fd27345250915fd06752c424f40651@85.222.234.135:26656,387027e3b1180d3a619cbbf3462704a490785963@54.176.90.228:26656,63bd9cfce0f0d274aad5b166dd06d829021aec43@121.78.247.243:56656,855807cc6a919c22ec943050ebb5c80b23724ed0@3.239.11.246:26656,8caefbf8f4318ecc93f2c901cf11470e4a16c818@161.97.135.122:26656,9174af5f16f74660cccf49f893d243949af45f7f@54.177.29.46:26656,9fa528bd2b9e7c80724a1d8a4e1a2a8a83e7d123@142.93.72.221:26656,a77f6a094578dad899e2f40e0626b4c6d4705311@3.36.165.232:26656,bd45a11390d16d128a9eeea3935b53d7a1a3c120@15.236.127.69:26656,cdb8dd7628460a546ce1594ca0bc0c20366514cf@34.72.64.178:26656,d1efceccb04ded9a604e5235f76da86872157d68@161.97.149.223:26656,e00b23444cc8dbb353d5faa765ab36cfc0116b57@83.60.98.134:28685,e5ee89bd4fc371c6a0e66d2b8daefd891b6b87b5@157.90.117.58:26656,f7ceb735606f90df7eb6cd987641876955b6e325@46.4.55.150:36656,ebc272824924ea1a27ea3183dd0b9ba713494f83@sentinel.mainnet.peer.autostake.net:26706,ade4d8bc8cbe014af6ebdf3cb7b1e9ad36f412c0@seeds.polkachu.com:23956&quot;/g&#x27; config.toml &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sed -i &#x27;s/persistent_peers = &quot;&quot;/persistent_peers = &quot;f6ba2e3e719428d17b045b43585dd9dcca66e76b@135.181.129.122:14656,e7b825983d15eef809e929b44b2085dcec9d27b6@51.68.44.219:26556,c124ce0b508e8b9ed1c5b6957f362225659b5343@134.65.192.134:26656,9055a3f947fd5eb8027f2a6958026b68eea2da81@157.90.2.111:26656,dd51ff321f29b59b51eedb8682acb3a9f07d44a6@138.201.131.133:26656,1154ef380c350885aef8a2fae6dc308f6844594a@65.108.6.54:50656,00673903c9a12081c7713b6757f62a8c7d7ffcbf@51.159.110.196:26656,1cdf6c69df0a0da5de77bce15270baa0d709d936@51.159.15.87:26656,2a426a8a0070a6830bad32b96cd3da1b7b6a2faa@65.108.11.250:29656,d2d9596df39d9b57ab1f01b8dea1b346178bf6e4@63.33.136.84:26656,2d786027097ca30c5843cf9f11c14a270499d305@3.85.203.113:26656,9c42bcb0d931b6387b4f808f540139bcd5bda968@131.153.174.14:53656,b60ca3f9ec0d72773ed3ea10bdc7acb90e05dea2@51.161.87.126:26656,4506adc06a18029f5620570cfe8cf0144a550125@135.181.216.151:50656,4398bd773ac885b7365de3604eb487be10c54563@95.214.55.227:26706,f0e52da07b2de80d751108ae63c6b2f25b4685a7@23.88.77.182:23956,7a13027588da83f557a176608c785f79ede84564@66.172.36.135:26656,471518432477e31ea348af246c0b54095d41352c@169.155.47.161:26656,a8bf4b3586ad57190d2f60b0e12fc80c138776e7@65.108.234.18:26656,18248ce04952a7e8fab4092eeabff97f6faaeca5@172.105.118.223:26656,fde9b8ae8348c911a1cb149372fa527ed095cbdc@154.12.246.226:26656,c5315e5e43e8e718c7c926c75b651e398750a4f8@137.220.50.79:26656,adad660c3110c10ca0e2f5e434c2f54b9dcb4e60@212.95.53.148:26656,662ccbd8c9885ddff6800a707da3dc6b0c4ed49d@15.235.115.148:10001,694324d39f53d6e6a0f79d33f535d0ee4a96f74a@37.120.245.177:26656,fd1c929dc0c2ce6418b6ed31747469de6c7b15bb@159.223.62.122:26656,25ee0fc9ba93cfcbee369f8c1f8d5d3bf06d1b76@34.23.21.55:26656,99f7fe677d2b5262fe95fb21e3edc5b9fc16fc4f@218.102.97.67:26706,c462db7a9b0d0ac8d26bddf55ed3ebff13219e51@51.159.221.58:26656,b46d8fea2e951ba21594c047c8746ab6dc315cea@65.109.99.157:16604,1c3409fde1bfe7719df8c60c56284ee36b4940e5@88.205.101.222:26656,97e4468ac589eac505a800411c635b14511a61bb@164.152.162.52:26656,6b9054afcd76719a4262694478ede8233e6bd7fb@168.119.64.123:26656,fb71d5064bcb1819f1aa49bf78576b4818fe914f@135.181.28.89:14656,38df1e987161e459b8637ab09cb6cef71ebd5035@109.199.115.65:26656,356e02cf1bb1df0e34e5c9f0470c0ad677bee6d6@185.150.26.184:26656,1bd8ddc05c1c267789854a91ab1d5fd0f5aded15@146.19.24.61:26656,4e43a3028f9c5e2e072b9445176a116245a2558e@135.181.5.232:23956,ef48f35580cf0034e12ca05eafd202a0cc0b577b@75.119.148.134:26656,752240820f1518d37a3c786b8617b9e30727d320@65.21.96.69:27156,dfd4db1ad111c62c83fa300af0092b253773aecc@65.108.106.135:26686,182c428b5ff02dc44bdc20a782b28f0cea204bd4@170.39.193.124:26656,73ef1c0f9bc77fd925decf7fa41f22a35b5dc76d@185.38.19.3:26630,8ebf4283512f708c2aee9d52e37aa694a5ec597a@49.12.165.122:26103,0d9f4ae53eb69d4790e9633094b19e0ff18c6e82@5.10.24.84:26656,212151a8cc307cdc5ad18a174a5cb181fbc7a153@134.65.194.144:27057,5ace0e57784e34930360bf6cc00dd5265278f708@65.108.238.166:23956,45ed1c0498e1ba7894e1362d533583b8c0fa1ae7@136.243.67.189:23956,ada37df88e50dd6b04571f8aa010a700d953e89a@138.201.60.188:26656,09423cc26d5490db197f944908eb2a13ec1c1288@65.108.103.184:25656,6a535c17deedfa178c8bb9c863b0f646e42f978e@163.172.74.144:26656,e1be5e84e6f76bdc4d24d2f39830b6f50857e684@78.107.253.133:33656,89757803f40da51678451735445ad40d5b15e059@169.155.169.176:26656,ecfdb8448a098ba96dc4b379d4e121df96fd706c@172.172.233.101:26656,ee49aa4d21783178781ab7b08922e3a4e288d977@178.63.93.41:50656,39ebd409f6d7bf68276955ded8f44bb3703a3273@65.108.199.42:26656,26422b225939a310fe1022730b38149a69d7d97e@38.242.200.201:26656,578993078e27b2b5f0c205becd3ad263fb9c366b@192.99.4.66:26796,d6d3b940785d0135e53e38bc4639e1cbce47e983@88.99.199.5:26656,2ab3546280efea3be610c1ba89d3d0bdb3f3cf22@51.158.204.245:26656,9045af707b492d02d05a7865a126d80d15627d91@65.109.97.51:26656,e46ba943d251e353bfc1571a168affff30e420fa@65.108.235.36:21656,22efb76a378788caf3bfe3b1ee5e488585e00e6b@51.178.65.225:51656,062847a82a69469c582429235c1b86365b92294d@65.21.201.244:26706,c0ba6216feb4527d6259392f61506fd1ddacc9c9@37.77.107.133:26609,9cb35c25ad0054c8630ea7595a7c60bbc8050c69@54.195.97.95:26656,dc8f68628bf86052fc12223abb9c258b95d677de@95.217.198.248:26656,42aa73ec8d4ec2ffb1c460dde7419991062bd084@138.197.190.122:31981,4e1c2471efb89239fb04a4b75f9f87177fd91d00@169.155.171.37:26656,c07e0facb3ed082e75a4f1e49ea31570c00923c2@188.34.151.177:26656,b212d5740b2e11e54f56b072dc13b6134650cfb5@169.155.45.136:26656,c1db58c070a76784ec203bcb9d51bb6c60737fb7@142.132.131.184:26686,493c4bee520125dea7b93bbe054b0e3918130f3f@46.38.251.243:26656,5781d45c4cce9cc748cf19afdab11e3ec2b21147@116.202.243.94:26656,d1f02ec2c3447e7a218ece5a2aab8f114dece309@167.114.118.234:26796,87b8675bc38f3d309e8fbedb860dd68ded7597f4@202.61.251.234:26656,29136bb5225bf2d20a5d42cd5d2ebb51b8135e18@102.223.5.249:26656,1f95bc704608d6f3d42bfce58e0fefbaef818891@89.149.218.78:26656,e1b058e5cfa2b836ddaa496b10911da62dcf182e@169.155.168.109:26656,ebc272824924ea1a27ea3183dd0b9ba713494f83@195.3.223.168:26706,4c011a64e66a38df4139ad2af5e8fe0798d00624@65.109.97.249:23956,66d0d22dc5e1e542c200da1fc097dae5ea1f3b4e@195.201.175.156:17256,79fe75a45a0e917bb81735fa76d59386c8d4934c@159.89.12.179:26656,79d1dd52fd031dfe4bcb849a39c02b145f12bd8f@38.46.221.75:26656,a527530ec76a3aaac8e18af8b6e33ae1f8170210@154.26.136.5:26656,a2e82bcafc58910b8e0f6cf06ab4e4f1993784c0@202.81.235.65:26656,fb530884639768a9bd3ae5d32cd182ada1b19066@135.181.62.165:26656,d05d4f304a5e736b09b955da53f1d4076a1bcb2a@142.54.174.234:26656,824a44e2332d402969582fbbb3e40b2e8c4855de@207.148.0.61:26656,1ac6746cb5163fc90b6707df802fc1bb63e56035@45.10.26.114:26656,ae9242d78fc004e1c437c5749eb3c0cbab7e879d@159.65.228.219:26656&quot;/g&#x27; config.toml &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sed -i &#x27;s/enable = false/enable = true/g&#x27; config.toml &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sed -i &#x27;s/pruning = &quot;default&quot;/pruning = &quot;custom&quot;/g&#x27; config.toml &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sed -i &#x27;s/pruning-keep-recent = &quot;0&quot;/pruning-keep-recent = &quot;2&quot;/g&#x27; config.toml &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sed -i &#x27;s/pruning-interval = &quot;0&quot;/pruning-interval = &quot;1000&quot;/g&#x27; config.toml &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sed -i &#x27;s/chunk_fetchers = &quot;4&quot;/chunk_fetchers = &quot;42&quot;/g&#x27; config.toml &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sed -i &#x27;s/indexer = &quot;kv&quot;/indexer = &quot;null&quot;/g&#x27; config.toml &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sed -i &#x27;s/prometheus = false/prometheus = true/g&#x27; config.toml &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sed -i &#x27;s/minimum-gas-prices = &quot;0.1udvpn&quot;/minimum-gas-prices = &quot;0.01ibc\/31FEE1A2A9F9C01113F90BD0BBCCE8FD6BBB8585FAF109A2101827DD1D5B95B8,0.1udvpn,0.01ibc\/B1C0DDB14F25279A2026BC8794E12B259F8BDA546A3C5132CCAEE4431CE36783,0.01ibc\/ED07A3391A112B175915CD8FAF43A2DA8E4790EDE12566649D0C2F97716B8518,0.01ibc\/A8C2D23A1E6F95DA4E48BA349667E322BD7A6C996D8A4AAE8BA72E190F3D1477&quot;/g&#x27; app.toml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Replicate the state-sync-sentvisor script for mainnet</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">COPY state-sync-sentvisor.sh /home/sentinel/sentinelhub</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WORKDIR /home/sentinel/sentinelhub</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Modify permissions to enable script run</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">USER root</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN chown sentinel state-sync-sentvisor.sh &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">chmod 700 state-sync-sentvisor.sh &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ln -s /home/sentinel/go/bin/cosmovisor /usr/local/bin/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">USER sentinel</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Install Cosmovisor </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN go install cosmossdk.io/tools/cosmovisor/cmd/cosmovisor@latest &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mkdir -p ~/.sentinelhub/cosmovisor &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mkdir -p ~/.sentinelhub/cosmovisor/genesis &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mkdir -p ~/.sentinelhub/cosmovisor/genesis/bin &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mkdir -p ~/.sentinelhub/cosmovisor/upgrades &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">echo &quot;# Cosmovisor Environmental Variables&quot; &gt;&gt; ~/.bashrc &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">echo &quot;export DAEMON_NAME=sentinelhub&quot; &gt;&gt; ~/.bashrc &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">echo &quot;export DAEMON_HOME=$HOME/.sentinelhub&quot; &gt;&gt; ~/.bashrc &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">echo &quot;export DAEMON_ALLOW_DOWNLOAD_BINARIES=false&quot; &gt;&gt; ~/.bashrc &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">echo &quot;export DAEMON_LOG_BUFFER_SIZE=512&quot; &gt;&gt; ~/.bashrc &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">echo &quot;export DAEMON_RESTART_AFTER_UPGRADE=true&quot; &gt;&gt; ~/.bashrc &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">echo &quot;export UNSAFE_SKIP_BACKUP=true&quot; &gt;&gt; ~/.bashrc &amp;&amp;\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cp /home/sentinel/go/bin/sentinelhub ~/.sentinelhub/cosmovisor/genesis/bin</span><br></span></code></pre></div></div><p></p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>State Sync Mainnet with Cosmovisor</summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Script framework credit to Busurnode other contents authored by Misfits (The Expanse)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Service Name </span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">SERVICE_NAME</span><span class="token operator">=</span><span class="token plain">cosmovisor</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># RPC Endpoints for the network</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">SNAP_RPC1</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;https://rpc-sentinel.busurnode.com:443&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">SNAP_RPC2</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;https://na-rpc-sentinel.busurnode.com:443&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Fetch block data from RPC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Fetching trusted block data from RPC...&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">LATEST_HEIGHT</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable function" style="color:rgb(80, 250, 123);font-style:italic">curl</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-s</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> $SNAP_RPC1/block </span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">|</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> jq </span><span class="token variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-r</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> .result.block.header.height</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">BLOCK_HEIGHT</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$((</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">LATEST_HEIGHT </span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">-</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable number" style="color:rgb(189, 147, 249);font-style:italic">2000</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">))</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">TRUST_HASH</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable function" style="color:rgb(80, 250, 123);font-style:italic">curl</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-s</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">&quot;</span><span class="token variable string variable" style="color:rgb(189, 147, 249);font-style:italic">$SNAP_RPC1</span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">/block?height=</span><span class="token variable string variable" style="color:rgb(189, 147, 249);font-style:italic">$BLOCK_HEIGHT</span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">&quot;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">|</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> jq </span><span class="token variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-r</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> .result.block_id.hash</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Update config with latest block from RPC...&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sed</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-i.bak</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-E</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;s|^(enable[[:space:]]+=[[:space:]]+).*$|</span><span class="token string entity" style="color:rgb(255, 121, 198)">\1</span><span class="token string" style="color:rgb(255, 121, 198)">true| ; \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">s|^(rpc_servers[[:space:]]+=[[:space:]]+).*$|</span><span class="token string entity" style="color:rgb(255, 121, 198)">\1</span><span class="token string entity" style="color:rgb(255, 121, 198)">\&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$SNAP_RPC1</span><span class="token string" style="color:rgb(255, 121, 198)">,</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$SNAP_RPC2</span><span class="token string entity" style="color:rgb(255, 121, 198)">\&quot;</span><span class="token string" style="color:rgb(255, 121, 198)">| ; \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">s|^(trust_height[[:space:]]+=[[:space:]]+).*$|</span><span class="token string entity" style="color:rgb(255, 121, 198)">\1</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$BLOCK_HEIGHT</span><span class="token string" style="color:rgb(255, 121, 198)">| ; \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">s|^(trust_hash[[:space:]]+=[[:space:]]+).*$|</span><span class="token string entity" style="color:rgb(255, 121, 198)">\1</span><span class="token string entity" style="color:rgb(255, 121, 198)">\&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$TRUST_HASH</span><span class="token string entity" style="color:rgb(255, 121, 198)">\&quot;</span><span class="token string" style="color:rgb(255, 121, 198)">|&quot;</span><span class="token plain"> </span><span class="token environment constant" style="color:rgb(189, 147, 249)">$HOME</span><span class="token plain">/.sentinelhub/config/config.toml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Stop the cosmovisor service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Stopping the cosmovisor service...&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Find the PID of the process</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">pid</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">pgrep </span><span class="token variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-f</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">&quot;</span><span class="token variable string variable" style="color:rgb(189, 147, 249);font-style:italic">$SERVICE_NAME</span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">&quot;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Check if the process is running</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-n</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$pid</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># Kill the process</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">kill</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$pid</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Process </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$SERVICE_NAME</span><span class="token string" style="color:rgb(255, 121, 198)"> killed successfully.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Process </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$SERVICE_NAME</span><span class="token string" style="color:rgb(255, 121, 198)"> not running.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Copy the validator state JSON file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Backing up validator state...&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> </span><span class="token environment constant" style="color:rgb(189, 147, 249)">$HOME</span><span class="token plain">/sentinelhub</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">cp</span><span class="token plain"> ~/.sentinelhub/data/priv_validator_state.json ~/.sentinelhub/priv_validator_state.json</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Reset Tendermint state</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sentinelhub tendermint unsafe-reset-all </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--home</span><span class="token plain"> </span><span class="token environment constant" style="color:rgb(189, 147, 249)">$HOME</span><span class="token plain">/.sentinelhub --keep-addr-book</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Replace priv_validator_state from backup</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Recover validator state from backup...&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">cp</span><span class="token plain"> ~/.sentinelhub/priv_validator_state.json ~/.sentinelhub/data/priv_validator_state.json</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Start the cosmovisor service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Starting the cosmovisor service...&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">nohup</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$SERVICE_NAME</span><span class="token plain"> run start </span><span class="token operator">&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Process complete.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;****To see the status of the process type cat nohup****&quot;</span><br></span></code></pre></div></div><p></p></div></div></details></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/full-node-setup/docker/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Overview</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/full-node-setup/docker/build"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Build</div></a></nav></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="margin-bottom--sm"><img src="/logo/sentinel-logo-light.svg" alt="Sentinel Docs" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" height="36px"><img src="/logo/sentinel-logo-dark.svg" alt="Sentinel Docs" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" height="36px"></div><div class="footer__row"><div class="footer__data"><div class="footer__cta"></div></div><div class="links"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/get-started">Get Started</a></li><li class="footer__item"><a class="footer__link-item" href="/sentinel-hub">Sentinel Hub</a></li><li class="footer__item"><a class="footer__link-item" href="/networks">Networks</a></li><li class="footer__item"><a class="footer__link-item" href="/dvpn-node-setup">Run a dVPN Node</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/get-started/apps">dVPN Apps</a></li><li class="footer__item"><a href="https://github.com/sentinel-official" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://medium.com/@sentinel" target="_blank" rel="noopener noreferrer" class="footer__link-item">Medium</a></li><li class="footer__item"><a href="https://sentinel.co" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sentinel Website</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://x.com/sentinelp2p" target="_blank" rel="noopener noreferrer" class="footer__link-item">X</a></li><li class="footer__item"><a href="https://t.me/sentinelp2p" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram</a></li><li class="footer__item"><a href="https://discord.com/invite/mmAA8qF" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://commonwealth.im/sentinel/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Commonwealth</a></li></ul></div></div></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright  Sentinel P2P - Built and maintained by <a href="https://trinitystake.io">Trinity Stake</a></div></div></div></footer></div>
</body>
</html>