"use strict";(self.webpackChunksentinel_docs=self.webpackChunksentinel_docs||[]).push([[4098],{72255:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"metrics/exporters/tendermint","title":"Tendermint Metrics","description":"Validator Machine","source":"@site/docs/node-monitoring/metrics/exporters/tendermint.md","sourceDirName":"metrics/exporters","slug":"/metrics/exporters/tendermint","permalink":"/node-monitoring/metrics/exporters/tendermint","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Tendermint Metrics","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Node Exporter","permalink":"/node-monitoring/metrics/exporters/node-exporter"},"next":{"title":"Cosmos Node Exporter","permalink":"/node-monitoring/metrics/exporters/cosmos-node-exporter"}}');var i=t(74848),o=t(28453);const s={title:"Tendermint Metrics",sidebar_position:3},c="Tendermint Metrics",a={},d=[{value:"Validator Machine",id:"validator-machine",level:2},{value:"Add the Job to Prometheus Config file",id:"add-the-job-to-prometheus-config-file",level:2}];function l(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"tendermint-metrics",children:"Tendermint Metrics"})}),"\n",(0,i.jsx)(n.h2,{id:"validator-machine",children:"Validator Machine"}),"\n",(0,i.jsx)(n.p,{children:"Execute the following operations on your validator machine"}),"\n",(0,i.jsxs)(n.p,{children:["Tendermint Metrics can be enabled by simply editing your validator ",(0,i.jsx)(n.code,{children:"config.toml"})," file."]}),"\n",(0,i.jsx)(n.p,{children:"Open your config file"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo nano /home/<your-user>/.sentinelhub/config/config.toml\n"})}),"\n",(0,i.jsx)(n.p,{children:"Edit the followinf fields like below"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"prometheus = true\nprometheus_listen_addr = :26660\n"})}),"\n",(0,i.jsx)(n.p,{children:"Save the file and restart your validator"}),"\n",(0,i.jsxs)(n.p,{children:["You can verify that ",(0,i.jsx)(n.code,{children:"metrics"})," are being exported by cURLing the /metrics endpoint:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:26660/metrics\n"})}),"\n",(0,i.jsx)(n.p,{children:"Success! Tendermint Metrics is now exposing metrics that Prometheus can scrape, including a wide variety of system metrics further down in the output."}),"\n",(0,i.jsxs)(n.admonition,{title:"Important",type:"danger",children:[(0,i.jsx)(n.p,{children:"After successfully enabling Tendermint Metrics, the next step is to open port 26660 on your Validator's firewall. This port should be accessible exclusively from your monitoring machine. This action is essential to enable Prometheus to collect data from Tendermint Metrics."}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo ufw allow from monitor_ip to validator_ip port 26660\n"})})]}),"\n",(0,i.jsx)(n.h2,{id:"add-the-job-to-prometheus-config-file",children:"Add the Job to Prometheus Config file"}),"\n",(0,i.jsxs)(n.p,{children:["On your monitoring machine, go to your prometheus directory and open your ",(0,i.jsx)(n.code,{children:"prometheus.yml"})," file"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo nano prometheus.yml\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Add the validator metrics job into it, under ",(0,i.jsx)(n.code,{children:"scrape_configs"})," block"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Validator Metrics\n  - job_name: "validator-metrics"\n\u200b\n    # validator ip and port\n    static_configs:\n      - targets: ["validator_ip:26660"]\n'})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>c});var r=t(96540);const i={},o=r.createContext(i);function s(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);