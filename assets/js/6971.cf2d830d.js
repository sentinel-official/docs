"use strict";(self.webpackChunksentinel_docs=self.webpackChunksentinel_docs||[]).push([[6971],{46971:(i,t,e)=>{e.r(t),e.d(t,{dyte_participant:()=>l,dyte_virtualized_participant_list:()=>p});var s=e(98342),a=e(371),n=e(44799),d=e(32011),c=e(71944),o=e(21848),h=e(58897);e(13633);var r=function(i,t,e,s){var a,n=arguments.length,d=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(i,t,e,s);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(d=(n<3?a(d):n>3?a(t,e,d):a(t,e))||d);return n>3&&d&&Object.defineProperty(t,e,d),d};const l=class{constructor(i){(0,s.r)(this,i),this.dyteSendNotification=(0,s.c)(this,"dyteSendNotification",7),this.pinnedListener=({isPinned:i})=>{this.isPinned=i},this.toggleTileListener=({hidden:i})=>{this.isHidden=i},this.stageListener=({stageStatus:i})=>{this.isOnStage="ON_STAGE"===i},this.view="sidebar",this.iconPack=a.a,this.t=(0,a.c)(),this.config=a.d,this.audioEnabled=!1,this.videoEnabled=!1,this.isPinned=!1,this.isHidden=!1,this.isOnStage=!1,this.canDisableParticipantAudio=!1,this.canDisableParticipantVideo=!1,this.canKickParticipant=!1,this.canPinParticipant=!1,this.canAllowParticipantOnStage=!1,this.menuOpen=!1,this.permissionsUpdateListener=()=>{this.meetingChanged(this.meeting)},this.inviteToStageToggle=async()=>{const i=this.participant,{stage:t}=this.meeting;"ACCEPTED_TO_JOIN_STAGE"!==i.stageStatus?(this.isOnStage?(i.isPinned&&i.unpin(),await t.kick([i.userId])):(await t.grantAccess([i.userId]),this.dyteSendNotification.emit({message:`${i.name} ${this.t("stage.invited_notification")}`,trace:`join-stage-invite-${i.id}`})),this.isOnStage="ON_STAGE"===i.stageStatus):this.dyteSendNotification.emit({message:`${i.name} ${this.t("stage.invited_notification")}`,trace:`join-stage-${i.id}`})},this.handleOutsideClick=i=>{!i.composedPath().includes(this.host)&&this.menuOpen&&(this.menuOpen=!1)},this.update=()=>{const i=this.host.shadowRoot.getElementById("trigger"),t=this.host.shadowRoot.getElementById("menu-list");(0,c.c)(i,t,{placement:"bottom-end",middleware:[(0,c.b)({allowedPlacements:["bottom-end","top-end"],alignment:"end"}),(0,c.o)(4),(0,c.s)({padding:8}),(0,c.h)()]}).then((({x:i,y:e,placement:s})=>{let a=null;a="bottom-end"===s?{right:`${i}px`,top:`${e}px`}:{right:`${i}px`,bottom:`${e}px`},Object.assign(t.style,a)}))},this.onMenuToggle=()=>{this.menuOpen=!this.menuOpen,this.menuOpen&&this.update()}}connectedCallback(){this.meetingChanged(this.meeting),this.participantChanged(this.participant),document.addEventListener("click",this.handleOutsideClick)}disconnectedCallback(){var i;document.removeEventListener("click",this.handleOutsideClick),null===(i=this.meeting)||void 0===i||i.self.permissions.removeListener("permissionsUpdate",this.permissionsUpdateListener),null!=this.participant&&null!=this.participant.removeListener&&(this.audioUpdateListener&&this.participant.removeListener("audioUpdate",this.audioUpdateListener),this.videoUpdateListener&&this.participant.removeListener("videoUpdate",this.videoUpdateListener),this.participant.removeListener("pinned",this.pinnedListener),this.participant.removeListener("unpinned",this.pinnedListener),this.participant.removeListener("stageStatusUpdate",this.stageListener),this.participant.removeListener("toggleTile",this.toggleTileListener))}meetingChanged(i){var t,e,s,n,d,c,o;if(null!=i){const{self:h}=i;this.canDisableParticipantAudio=h.permissions.canAllowParticipantAudio||h.permissions.canDisableParticipantAudio,this.canDisableParticipantVideo=h.permissions.canAllowParticipantVideo||h.permissions.canDisableParticipantVideo,this.canKickParticipant=h.permissions.kickParticipant&&!0!==(null===(t=this.meeting)||void 0===t?void 0:t.__internals__.features.hasFeature(a.F.DISABLE_KICKING))&&(!0!==(null===(e=this.meeting)||void 0===e?void 0:e.__internals__.features.hasFeature(a.F.ADMIN_CANTREMOVE_ADMIN))||"webinar_admin"!==(null===(s=this.participant)||void 0===s?void 0:s.presetName)),this.canPinParticipant=h.permissions.pinParticipant,this.canAllowParticipantOnStage=h.permissions.acceptStageRequests&&h.permissions.stageEnabled&&(!0!==(null===(n=this.meeting)||void 0===n?void 0:n.__internals__.features.hasFeature(a.F.ADMIN_CANTREMOVE_ADMIN))||"webinar_admin"!==(null===(d=this.participant)||void 0===d?void 0:d.presetName))&&(!0!==(null===(c=this.meeting)||void 0===c?void 0:c.__internals__.features.hasFeature(a.F.CANTINVITE_VIEWER))||"webinar_viewer"!==(null===(o=this.participant)||void 0===o?void 0:o.presetName)),i.self.permissions.addListener("permissionsUpdate",this.permissionsUpdateListener)}}participantChanged(i){var t;if(null!=i){if(this.audioEnabled=i.audioEnabled,this.videoEnabled=i.videoEnabled,this.isPinned=i.isPinned,this.isHidden=null!==(t=i.hidden)&&void 0!==t&&t,this.isOnStage="ON_STAGE"===i.stageStatus,this.audioUpdateListener=({audioEnabled:i})=>{this.audioEnabled=i},this.videoUpdateListener=({videoEnabled:i})=>{this.videoEnabled=i},null==i.addListener)return;i.addListener("audioUpdate",this.audioUpdateListener),i.addListener("videoUpdate",this.videoUpdateListener),i.addListener("pinned",this.pinnedListener),i.addListener("unpinned",this.pinnedListener),i.addListener("stageStatusUpdate",this.stageListener),this.participant.addListener("toggleTile",this.toggleTileListener)}}render(){var i,t,e,a,c,o,h,r,l;const p="AUDIO_ROOM"===(null===(i=this.meeting)||void 0===i?void 0:i.meta.viewType),g=(null===(t=this.meeting)||void 0===t?void 0:t.self.id)===this.participant.id,m=this.canDisableParticipantAudio&&this.audioEnabled||this.canDisableParticipantVideo&&this.videoEnabled&&!p||this.canKickParticipant||this.canPinParticipant&&this.isOnStage||this.canAllowParticipantOnStage,u=(0,d.f)((null===(e=this.participant)||void 0===e?void 0:e.name)||""),b=this.isOnStage||["GROUP_CALL","AUDIO_ROOM"].includes(null===(a=this.meeting)||void 0===a?void 0:a.meta.viewType),v={meeting:this.meeting,size:"sm",states:this.states,config:this.config,iconPack:this.iconPack,t:this.t};return(0,s.h)(s.H,{key:"6d2a340a09306d4981227b3048faeed243a14cce"},(0,s.h)("div",{class:"left",key:null===(c=this.participant)||void 0===c?void 0:c.id},(0,s.h)("dyte-avatar",{key:"bc8453dc32910051b58cf61fdd282a32955d1612",participant:this.participant,size:"sm",iconPack:this.iconPack,t:this.t}),(0,s.h)("p",{key:"ca4a796d5354d0fbe8d3358a321245a3d841a3f1",class:"name",title:u},(0,d.s)(u,16)," ",(null===(o=this.meeting)||void 0===o?void 0:o.self.id)===(null===(h=this.participant)||void 0===h?void 0:h.id)&&this.t("(you)"))),"sidebar"===this.view&&(0,s.h)("div",{key:"febaee3e2c6c2fd398d1fb05f846fbef796d73fd",class:"right"},b&&(0,s.h)("dyte-icon",{key:"7eeb84f4a67cd6fdc4b2175ac5de5e32afd50486",class:{red:!this.audioEnabled},icon:this.audioEnabled?this.iconPack.mic_on:this.iconPack.mic_off}),b&&!p&&(0,s.h)("dyte-icon",{key:"21aaa6cca2ed53deb8b1276f8f1786c1089e2dd6",class:{red:!this.videoEnabled},icon:this.videoEnabled?this.iconPack.video_on:this.iconPack.video_off}),(m||(0,n.l)({element:"dyte-participant",defaults:v,childProps:{participant:this.participant}})>0)&&(0,s.h)("div",{key:"6c7cc6c9a02e83fb1c87416b601dd1e016c3a549",class:"menu"},(0,s.h)("span",{key:"0dc87f46b4f0ceb1100a1a204f3b0dc92e042b12",id:"trigger",onClick:this.onMenuToggle},(0,s.h)("dyte-button",{key:"6e15059d18d929005ec8c820011de9046d69c5c6",variant:"ghost",kind:"icon",slot:"trigger"},(0,s.h)("dyte-icon",{key:"2424eb5e59c79fff940435486befc709b24dd5f5",class:"more",icon:this.iconPack.more_vertical}))),(0,s.h)("span",{key:"972e9250b7b434b1a6673b3924563535def9f114",id:"menu-list"},this.menuOpen&&(0,s.h)("dyte-menu-list",{key:"eb12f27f3eec66530257a9dc653f049a9b691569",iconPack:this.iconPack,t:this.t},this.canPinParticipant&&b&&!p&&(0,s.h)("dyte-menu-item",{key:"6fd8046b97eb6d97a872cf9b6b8d550d853aeaed",onClick:()=>{this.isPinned?this.participant.unpin():this.participant.pin()},iconPack:this.iconPack,t:this.t},(0,s.h)("dyte-icon",{key:"80f2a8d9b3a6ec7c4da6ca162865b296949ab07b",icon:this.isPinned?this.iconPack.pin_off:this.iconPack.pin,slot:"start"}),this.isPinned?this.t("unpin"):this.t("pin")),g&&(0,s.h)("dyte-menu-item",{key:"e784419ef130de759f507650de1bc92c6ac07c2a",iconPack:this.iconPack,t:this.t,onClick:()=>{this.isHidden?this.participant.show():this.participant.hide()}},(0,s.h)("dyte-icon",{key:"b349973219fb497d83b2a8852da0fc8558a1a51c",icon:this.isHidden?this.iconPack.minimize:this.iconPack.maximize,slot:"start"}),this.meeting.self.hidden?this.t("maximize"):this.t("minimize")),this.canDisableParticipantAudio&&b&&this.audioEnabled&&(0,s.h)("dyte-menu-item",{key:"a6aa845f9ed193e7aaecb8dfc13390b2aab672c3",iconPack:this.iconPack,t:this.t,onClick:()=>{this.participant.disableAudio()}},(0,s.h)("dyte-icon",{key:"e0ac24333a670684d60802edc085c0eb918571c0",icon:this.iconPack.mic_off,slot:"start"}),this.t("mute")),this.canDisableParticipantVideo&&b&&this.videoEnabled&&(0,s.h)("dyte-menu-item",{key:"07ec0b852abd9dc7739343ce5953fbdc8c4e9408",iconPack:this.iconPack,t:this.t,onClick:()=>{this.participant.disableVideo()}},(0,s.h)("dyte-icon",{key:"1cccc03618c740983971502a9bbb50ab86947170",icon:this.iconPack.video_off,slot:"start"}),this.t("participants.turn_off_video")),this.canAllowParticipantOnStage&&(null===(r=this.participant)||void 0===r?void 0:r.id)!==(null===(l=this.meeting)||void 0===l?void 0:l.self.id)&&(0,s.h)("dyte-menu-item",{key:"2ee271afaf0b99eb6b793abe337777251b4d2ce8",iconPack:this.iconPack,t:this.t,class:this.isOnStage?"red":"",onClick:this.inviteToStageToggle},(0,s.h)("dyte-icon",{key:"3734c9fa9bb9654d2c7d1b75bf53ad051020a88d",icon:this.isOnStage?this.iconPack.leave_stage:this.iconPack.join_stage,slot:"start"}),this.isOnStage?this.t("stage.remove_from_stage"):this.t("stage.add_to_stage")),!g&&this.canKickParticipant&&(0,s.h)("dyte-menu-item",{key:"2ecb4ee36b844bd605c72a13049d1508d6bc9e62",iconPack:this.iconPack,t:this.t,class:"red",onClick:()=>{var i,t;null===(i=this.meeting)||void 0===i||i.participants.kick(null===(t=this.participant)||void 0===t?void 0:t.id)}},(0,s.h)("dyte-icon",{key:"1e328de97168baf6c5bf66eb56eb3c6017ff4f90",icon:this.iconPack.dismiss,slot:"start"}),this.t("kick")),(0,s.h)("slot",{key:"73c6d605b84d57666f083484660f269a8bc9b36e"},(0,s.h)(n.R,{key:"8dbbbf398d6ff4cd6d98d353ebb31326e99f4742",element:"dyte-participant",defaults:v,childProps:{participant:this.participant},deepProps:!0,onlyChildren:!0})))))))}get host(){return(0,s.a)(this)}static get watchers(){return{meeting:["meetingChanged"],participant:["participantChanged"]}}};r([(0,o.S)()],l.prototype,"meeting",void 0),r([(0,o.S)()],l.prototype,"states",void 0),r([(0,o.S)()],l.prototype,"iconPack",void 0),r([(0,o.S)()],l.prototype,"t",void 0),l.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;height:var(--dyte-space-14, 56px);align-items:center;justify-content:space-between;cursor:pointer;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}:host dyte-avatar{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);font-size:14px}.left{display:flex;align-items:center}.left>*{margin-right:var(--dyte-space-2, 8px)}.left>*:last-child{margin-right:var(--dyte-space-0, 0px)}.right{display:flex;align-items:center;justify-content:flex-end}.right>*{margin-left:var(--dyte-space-2, 8px)}.right>*:first-child{margin-left:var(--dyte-space-0, 0px)}.name{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}dyte-icon.red{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon.more{cursor:pointer}.menu{position:relative;display:inline-block;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}#menu-list{position:absolute;top:var(--dyte-space-8, 32px) !important;right:var(--dyte-space-4, 16px) !important;z-index:20}";const p=class{constructor(i){(0,s.r)(this,i),this.items=[],this.itemHeight=55,this.bufferedItemsCount=5,this.emptyListElement=null,this.visibleStart=0,this.visibleEnd=0,this.containerHeight=0,this.lastScrollTop=0,this.recalculatePositioning=()=>{this.updateContainerHeight(),requestAnimationFrame((()=>{this.updateItemHeight()}))},this.updateContainerHeight=()=>{this.el.querySelector(".virtual-list-container").clientHeight&&(requestAnimationFrame((()=>{this.updateItemHeight()})),this.containerHeight=this.el.querySelector(".virtual-list-container").clientHeight,this.updateVisibleRange())},this.onScroll=(0,h.d)((()=>{const i=this.el.querySelector(".virtual-list-container").scrollTop;i>this.lastScrollTop&&this.visibleEnd===this.items.length||(this.lastScrollTop=i,this.updateVisibleRange())}))}itemsChanged(){this.recalculatePositioning()}componentDidLoad(){this.recalculatePositioning(),this.el.querySelector(".virtual-list-container").addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.recalculatePositioning)}componentDidUpdate(){this.updateItemHeight()}disconnectedCallback(){this.el.querySelector(".virtual-list-container").removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.recalculatePositioning)}updateVisibleRange(){const i=this.el.querySelector(".virtual-list-container").scrollTop,t=Math.floor(i/this.itemHeight),e=Math.ceil(this.containerHeight/this.itemHeight),s=Math.min(this.items.length,t+e+this.bufferedItemsCount);this.visibleStart=t,this.visibleEnd=s,this.el.querySelector(".virtual-list-container").scrollTop=this.lastScrollTop}updateItemHeight(){const i=this.el.querySelector(".virtual-list-item");if(i){const t=i.style.height;i.style.height="auto";const e=i.getBoundingClientRect().height;t&&(i.style.height=t),e&&Math.floor(e)!==Math.floor(this.itemHeight)&&(this.itemHeight=e)}}renderItems(){return this.items.slice(this.visibleStart,this.visibleEnd).map(((i,t)=>{const e=this.visibleStart+t;return(0,s.h)("div",{class:"virtual-list-item",key:i.id,style:{position:"absolute",top:e*this.itemHeight+"px",height:`${this.itemHeight}px`,width:"100%"}},this.renderItem(i,e))}))}render(){var i;const t=this.items.length*this.itemHeight;return(0,s.h)("div",{key:"1b37d3baa0af9ff413be304f5368849d20a47b23",class:"virtual-list-container",style:{position:"relative",height:"100%",overflowX:"hidden",overflowY:"auto"}},(0,s.h)("div",{key:"6bfd8b0993b3a78ea2317715e54c68cb4458ec5a",style:{height:`${t}px`,position:"relative"}},(null===(i=this.items)||void 0===i?void 0:i.length)?this.renderItems():this.emptyListElement),(0,s.h)("div",{key:"c6917ed47b4f3d579809f0b620f94aaf25779137",style:{height:`${this.itemHeight}px`}}))}get el(){return(0,s.a)(this)}static get watchers(){return{items:["itemsChanged"]}}};p.style=":host{height:100%;width:100%}"}}]);