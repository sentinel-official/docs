"use strict";(self.webpackChunksentinel_docs=self.webpackChunksentinel_docs||[]).push([[1745,4126],{54126:(t,e,s)=>{s.r(e),s.d(e,{dyte_stage_toggle:()=>o});var i=s(98342),a=s(371),n=s(21848);var l=function(t,e,s,i){var a,n=arguments.length,l=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,s,i);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(l=(n<3?a(l):n>3?a(e,s,l):a(e,s))||l);return n>3&&l&&Object.defineProperty(e,s,l),l};const o=class{constructor(t){(0,i.r)(this,t),this.stateUpdate=(0,i.c)(this,"dyteStateUpdate",7),this.variant="button",this.iconPack=a.a,this.t=(0,a.c)(),this.stageStatus="OFF_STAGE",this.state={label:"",disabled:!1,icon:""},this.stageCallback=async()=>{var t,e,s,i,n,l,o;const d=null===(t=this.meeting.stage)||void 0===t?void 0:t.status;"ON_STAGE"===d&&await(null===(s=null===(e=null==this?void 0:this.meeting)||void 0===e?void 0:e.stage)||void 0===s?void 0:s.leave()),"OFF_STAGE"===d&&(null===(n=null===(i=null==this?void 0:this.meeting)||void 0===i?void 0:i.stage)||void 0===n||n.requestAccess(),(t=>{var e,s;return(null===(e=null==t?void 0:t.self)||void 0===e?void 0:e.permissions.stageEnabled)&&"ALLOWED"===(null===(s=null==t?void 0:t.self)||void 0===s?void 0:s.permissions.stageAccess)})(this.meeting)&&(a.l.states.activeJoinStage=!0,this.stateUpdate.emit({activeJoinStage:!0}))),"REQUESTED_TO_JOIN_STAGE"===d&&(null===(o=null===(l=null==this?void 0:this.meeting)||void 0===l?void 0:l.stage)||void 0===o||o.cancelRequestAccess())}}connectedCallback(){this.meetingChanged(this.meeting)}stageStatusHandler(t,e){this.stageStatus=e,"ACCEPTED_TO_JOIN_STAGE"===e&&(t.self.setupTracks({audio:!1,video:!1}),this.stateUpdate.emit({activeJoinStage:!0})),this.state=this.getState()}disconnectedCallback(){var t,e;null===(e=null===(t=this.meeting)||void 0===t?void 0:t.stage)||void 0===e||e.removeListener("stageStatusUpdate",(t=>this.stageStatusHandler(this.meeting,t)))}meetingChanged(t){var e,s,i,a;null!=t&&(this.stageStatus=null===(e=t.stage)||void 0===e?void 0:e.status,this.stageStatusHandler(t,null===(s=t.stage)||void 0===s?void 0:s.status),null===(a=null===(i=this.meeting)||void 0===i?void 0:i.stage)||void 0===a||a.on("stageStatusUpdate",(e=>this.stageStatusHandler(t,e))))}getState(){let t="",e="",s=!1;switch(this.stageStatus){case"ON_STAGE":e=this.iconPack.leave_stage,t=this.t("stage_request.leave_stage"),s=!1;break;case"ACCEPTED_TO_JOIN_STAGE":e=this.iconPack.join_stage,t=this.t("stage_request.request"),s=!0;break;case"REQUESTED_TO_JOIN_STAGE":e=this.iconPack.join_stage,t=this.t("stage_request.requested"),s=!1;break;default:e=this.iconPack.join_stage,t=this.t("stage_request.request"),s=!1}return{label:t,disabled:s,icon:e}}render(){return t=this.meeting,(null===(e=null==t?void 0:t.self)||void 0===e?void 0:e.permissions.stageEnabled)&&"NOT_ALLOWED"!==(null===(s=null==t?void 0:t.self)||void 0===s?void 0:s.permissions.stageAccess)?(0,i.h)(i.H,{title:this.state.label},(0,i.h)("dyte-tooltip",{placement:"top",kind:"block",label:this.state.label,delay:600,part:"tooltip"},(0,i.h)("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,variant:this.variant,label:this.state.label,icon:this.state.icon,onClick:this.stageCallback,disabled:this.state.disabled,showWarning:!1}))):(0,i.h)(i.H,{"data-hidden":!0});var t,e,s}static get watchers(){return{meeting:["meetingChanged"]}}};l([(0,n.S)()],o.prototype,"meeting",void 0),l([(0,n.S)()],o.prototype,"size",void 0),l([(0,n.S)()],o.prototype,"iconPack",void 0),l([(0,n.S)()],o.prototype,"states",void 0),l([(0,n.S)()],o.prototype,"t",void 0),o.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}:host([data-hidden]){display:none}"},21848:(t,e,s)=>{s.d(e,{S:()=>n});var i=s(98342),a=s(371);function n(){return function(t,e){const{connectedCallback:s,disconnectedCallback:n}=t;t.connectedCallback=function(){const t=(0,i.a)(this);if(!t[e]){const s=a.u.state[e];t[e]=s,(0,a.o)(e,t)}return null==s?void 0:s.call(this)},t.disconnectedCallback=function(){return(0,a.q)(e,(0,i.a)(this)),null==n?void 0:n.call(this)}}}}}]);