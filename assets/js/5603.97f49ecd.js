"use strict";(self.webpackChunksentinel_docs=self.webpackChunksentinel_docs||[]).push([[5603,7984],{17984:(t,e,i)=>{i.r(e),i.d(e,{dyte_transcripts:()=>c});var s=i(98342),r=i(371),n=i(21848),a=i(29522);i(86979),i(13633);var d=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var d=t.length-1;d>=0;d--)(r=t[d])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a};const c=class{constructor(t){(0,s.r)(this,t),this.config=r.d,this.t=(0,r.c)(),this.transcripts=[],this.listenerAttached=!1,this.onTranscript=t=>{t.transcript&&this.add(t)}}connectedCallback(){this.meetingChanged(this.meeting)}addListener(t){var e;null===(e=null==t?void 0:t.ai)||void 0===e||e.addListener("transcript",this.onTranscript),this.listenerAttached=!0}clearListeners(t){var e;this.onTranscript&&(null===(e=null==t?void 0:t.ai)||void 0===e||e.removeListener("transcript",this.onTranscript)),this.listenerAttached=!1,clearTimeout(this.disconnectTimeout),this.transcripts=[]}disconnectedCallback(){null!=this.meeting&&this.clearListeners(this.meeting)}meetingChanged(t,e){clearTimeout(this.disconnectTimeout),void 0!==e&&this.clearListeners(e),null!=t&&this.states.activeCaptions&&this.addListener(t)}statesChanged(t){t&&(t.activeCaptions&&!this.listenerAttached&&this.addListener(this.meeting),!t.activeCaptions&&this.listenerAttached&&this.clearListeners(this.meeting))}transcriptionsReducer(t,e){if(!t.length)return[e];let i=t[t.length-1];return i.peerId!==e.peerId?t.concat(e):i.id===e.id?(i.transcript=e.transcript,t.pop(),t.concat((0,a.c)(i))):t.concat(e)}add(t){this.transcripts=this.transcriptionsReducer(this.transcripts,t)}remove(t){this.transcripts=this.transcripts.filter((e=>e.renderedId!==t))}handleDismiss(t){t.stopPropagation();const{id:e,renderedId:i}=t.detail,r=this.host.shadowRoot.querySelector(`[data-id="${e}"]`);null==r||r.classList.add("exit"),setTimeout((()=>{(0,s.w)((()=>{this.remove(i)}))}),400)}renderTranscripts(){const t=[];return this.transcripts.forEach((e=>{const i={name:e.name,date:e.date,peerId:e.peerId,transcript:e.transcript,id:e.id,renderedId:e.id};if(!t.length)return e.renderedId=i.renderedId,void t.push(i);const s=t[t.length-1];if(s.transcript.length+i.transcript.length>400||s.peerId!==e.peerId)return e.renderedId=i.renderedId,void t.push(i);s.transcript+=" "+e.transcript,e.renderedId=s.renderedId})),t.splice(0,t.length-2),null==t?void 0:t.map((t=>(0,s.h)("dyte-transcript",{key:t.id,"data-id":t.id,transcript:t,onDyteTranscriptDismiss:t=>this.handleDismiss(t),t:this.t})))}render(){if(this.states.activeCaptions)return(0,s.h)(s.H,null,this.renderTranscripts())}get host(){return(0,s.a)(this)}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};d([(0,n.S)()],c.prototype,"meeting",void 0),d([(0,n.S)()],c.prototype,"states",void 0),d([(0,n.S)()],c.prototype,"t",void 0),c.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:absolute;top:var(--dyte-space-4, 16px);right:var(--dyte-space-4, 16px);bottom:var(--dyte-space-4, 16px);left:var(--dyte-space-4, 16px);top:auto;display:flex;flex-direction:column;pointer-events:none;justify-content:center;width:100%;z-index:5}dyte-transcript{margin-top:var(--dyte-space-2, 8px)}"}}]);