"use strict";(self.webpackChunksentinel_docs=self.webpackChunksentinel_docs||[]).push([[2181,4562],{24562:(t,e,i)=>{i.r(e),i.d(e,{dyte_livestream_toggle:()=>l});var s=i(98342),a=i(371),r=i(21848);var n=function(t,e,i,s){var a,r=arguments.length,n=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(n=(r<3?a(n):r>3?a(e,i,n):a(e,i))||n);return r>3&&n&&Object.defineProperty(e,i,n),n};const l=class{constructor(t){(0,s.r)(this,t),this.stateUpdate=(0,s.c)(this,"dyteStateUpdate",7),this.dyteAPIError=(0,s.c)(this,"dyteAPIError",7),this.variant="button",this.iconPack=a.a,this.t=(0,a.c)(),this.livestreamState="IDLE",this.livestreamStateListener=t=>{this.livestreamState=t,"LIVESTREAMING"!==t&&"IDLE"!==t||this.stateUpdate.emit({activeMoreMenu:!1})},this.isLoading=()=>null==this.meeting||"STARTING"===this.livestreamState||"STOPPING"===this.livestreamState}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.clearListeners()}meetingChanged(t){var e,i;null!=t&&(this.livestreamState=null===(e=this.meeting.livestream)||void 0===e?void 0:e.state,null===(i=this.meeting.livestream)||void 0===i||i.on("livestreamUpdate",this.livestreamStateListener))}async toggleLivestream(){var t,e;if("LIVESTREAMING"===this.livestreamState)try{await(null===(t=this.meeting.livestream)||void 0===t?void 0:t.stop())}catch(i){this.dyteAPIError.emit({trace:this.t("livestream.stop"),message:this.t("livestream.error.stop")})}else try{await(null===(e=this.meeting.livestream)||void 0===e?void 0:e.start())}catch(s){this.dyteAPIError.emit({trace:this.t("livestream.start"),message:this.t("livestream.error.start")})}}clearListeners(){var t;null===(t=this.meeting.livestream)||void 0===t||t.removeListener("livestreamUpdate",this.livestreamStateListener)}getLivestreamLabel(){switch(this.livestreamState){case"IDLE":return this.t("livestream.go_live");case"LIVESTREAMING":return this.t("livestream.end_live");case"WAITING_ON_MANUAL_INGESTION":return this.t("livestream.waiting_on_manual_ingestion");case"STARTING":return this.t("livestream.starting");case"STOPPING":return this.t("livestream.stopping");default:return this.t("livestream.error")}}getLivestreamIcon(){switch(this.livestreamState){case"IDLE":case"WAITING_ON_MANUAL_INGESTION":return this.iconPack.start_livestream;default:return this.iconPack.stop_livestream}}render(){return(0,a.i)(this.meeting)?(0,s.h)(s.H,null,(0,s.h)("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,isLoading:this.isLoading(),class:{"active-livestream":"LIVESTREAMING"===this.livestreamState},onClick:()=>this.toggleLivestream(),icon:this.getLivestreamIcon(),disabled:this.isLoading(),label:this.t(this.getLivestreamLabel()),variant:this.variant})):(0,s.h)(s.H,{"data-hidden":!0})}static get watchers(){return{meeting:["meetingChanged"]}}};n([(0,r.S)()],l.prototype,"meeting",void 0),n([(0,r.S)()],l.prototype,"size",void 0),n([(0,r.S)()],l.prototype,"iconPack",void 0),n([(0,r.S)()],l.prototype,"t",void 0),l.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}:host([data-hidden]){display:none}"},21848:(t,e,i)=>{i.d(e,{S:()=>r});var s=i(98342),a=i(371);function r(){return function(t,e){const{connectedCallback:i,disconnectedCallback:r}=t;t.connectedCallback=function(){const t=(0,s.a)(this);if(!t[e]){const i=a.u.state[e];t[e]=i,(0,a.o)(e,t)}return null==i?void 0:i.call(this)},t.disconnectedCallback=function(){return(0,a.q)(e,(0,s.a)(this)),null==r?void 0:r.call(this)}}}}}]);